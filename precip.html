<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./css/normalize.css">
    <link rel="stylesheet" href="./css/styles.css">

    <title>Precipitación</title>

    <link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
    <link rel="manifest" href="./images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>
<body>

    <header class="header_product">
        <nav class="nav container">
            <div class="nav_logo">
                <img src="./images/logo_UCG.gif" alt="logo_UCG" class="nav_logo_img_product1">
            </div>
            
            <h1 class="header_title_product">VALENSAT</h1>
            
            <ul class="idiomas">
                <li class="idiomas_items">
                    <a href="#" class="idiomas_item">ES</a>
                </li>
                <li class="idiomas_items">
                    <a href="#" class="idiomas_item">EN</a>
                </li>
                <li class="idiomas_items">
                    <a href="#" class="idiomas_item">VAL</a>
                </li>
            </ul>

            <div class="nav_logo">
                <img src="./images/logo_uv.jpg" alt="logo_UV" class="nav_logo_img_product2">
            </div>
        </nav>
    </header>

    <main>

        <section class="menu">
            <section class="menu__container">
                <ul class="menu__links">
                    <li class="menu__item">
                        <a href="./index.html" class="menu__link">Inicio</a>
                    </li>
   
                    <li class="menu__item menu__item--show">
                        <a href="#" class="menu__link menu__item--show">Temperatura <img src="./images/arrow_down.svg" alt="down arrow" class="menu__arrow"></a>
    
                        <ul class="menu__nesting">
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Temperatura</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">LST</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Heladas</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">UHI</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">HVI</a>
                            </li>
                        </ul>
                    </li>
    
                    <li class="menu__item menu__item--show">
                        <a href="#" class="menu__link">Incendios <img src="./images/arrow_down.svg" alt="down arrow" class="menu__arrow"></a>
    
                        <ul class="menu__nesting">
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">NBR</a>
                            </li>
                            <li class="menu__inside">
                                <a href="./areaQuemada.html" class="menu__link menu__link--inside">Área quemada</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Mapas de riesgo</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Severidad</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menu__item menu__item--show">
                        <a href="#" class="menu__link">Vegetación <img src="./images/arrow_down.svg" alt="down arrow" class="menu__arrow"></a>
    
                        <ul class="menu__nesting">
                            <li class="menu__inside">
                                <a href="./ndvi.html" class="menu__link menu__link--inside">Índices de vegetación</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menu__item menu__item--show">
                        <a href="#" class="menu__link">Agua <img src="./images/arrow_down.svg" alt="down arrow" class="menu__arrow"></a>
    
                        <ul class="menu__nesting">
                            <li class="menu__inside">
                                <a href="./calidad.html" class="menu__link menu__link--inside">Calidad del agua</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Índices</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Humedad Relativa</a>
                            </li>
                            <li class="menu__inside">
                                <a href="./precip.html" class="menu__link menu__link--inside">Precipitación</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menu__item menu__item--show">
                        <a href="#" class="menu__link">Cobertura del suelo <img src="./images/arrow_down.svg" alt="down arrow" class="menu__arrow"></a>
    
                        <ul class="menu__nesting">
                            <li class="menu__inside">
                                <a href="./landcover.html" class="menu__link menu__link--inside">Land Cover</a>
                            </li>
                            <li class="menu__inside">
                                <a href="#" class="menu__link menu__link--inside">Evolución temporal</a>
                            </li>
                        </ul>
                    </li>
    
                    <li class="menu__item">
                        <a href="./por_zona.html" class="menu__link">Por zona</a>
                    </li>

                    <li class="menu__item">
                        <a href="#" class="menu__link">Acerca de</a>
                    </li>
                </ul>

                <div class="menu__hamburguer">
                    <h2 class="title_hamburguer">PRODUCTOS DISPONIBLES</h2>
                    <img src="./images/mouse.svg" alt="menu" class="menu__img">
                </div>
            </section>
        </section>

        <section class="container about">
            <h2 class="subtitle">Histórico datos climatólogicos</h2>
            <p class="about_paragraph">Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae voluptates exercitationem, voluptatem tempora consequatur in, accusantium assumenda doloribus necessitatibus, eum aperiam illum porro pariatur? Magnam facere possimus praesentium libero rerum.
            Repellendus ipsum commodi totam. Ut a cumque, saepe deserunt, mollitia distinctio architecto omnis enim dolorum id, ex sed eaque numquam! Explicabo quae dolore nemo, porro esse illo sapiente quas soluta.
            Ullam, reprehenderit. Ipsum, debitis blanditiis at et cum possimus molestiae. Atque, a! Iusto incidunt deserunt excepturi ab. Ducimus cum quisquam itaque quia provident ab! Quibusdam nemo fuga rerum doloribus itaque!
            Velit officia delectus laborum asperiores quam pariatur eum rem optio consectetur natus facere ipsam eius, sunt voluptatibus tempora harum esse distinctio? Maiores iure explicabo beatae iusto dicta consequatur, modi earum.</p>
            <div class="container about">
                <div>
                    <h2 class="subtitle">Histórico Valencia</h2>
                </div>
                <canvas id="temp_hist"></canvas>
                <canvas id="prec_hist"></canvas>
                <img src="./images/temperatura/temp_color.gif" alt="Histórico de temperatura en valencia">
                <img src="./images/temperatura/prec_color.gif" alt="Histórico de precipitación en valencia">
            </div>


            <div class="container">
                <div class="table_title">
                    <h2 class="subtitle">Temperatura de las últimas 24h - AEMET (Valencia)</h2>
                </div>
                <canvas id="temp_val_json"></canvas>
            </div>   
         
            <div class=" container table_title">
                <h2 class="subtitle">Temperatura de las últimas 24h - Desplegable</h2>
                <div id="div_desplegable">
                    <canvas id="graf_desplegable"></canvas>
                </div>
                <select id="ciudad">
                    <option>Elige ciudad</option>
                    <option value="alacant">Alicante</option>
                    <option value="castello">Castellón</option>
                    <option value="valencia">Valencia</option>
                </select>
                <input type="button" value="Buscar" onclick="actualizarContenido()">
            </div>

            <script src="./js/desplegable_graf.js"></script>
            
    
            <div class="container">
                <div>
                    <h2 class="subtitle">Diagrama ombrotérmico - 2021</h2>
                </div>
                <canvas id="clim_2021"></canvas>
            </div>
            
            <div class="container">
                <div>
                    <h2 class="subtitle">Diagrama ombrotérmico - 2022</h2>
                </div>
                <canvas id="clim_2022"></canvas>
            </div>

            <div class="container">
                <div>
                    <h2 class="subtitle">Diagrama ombrotérmico - Todos los años</h2>
                </div>
                <canvas id="clim_medio"></canvas>
            </div>
        </section>
        
        <div class="container about">
            <div>
                <h2 class="subtitle">Evolución MSG día anterior</h2>
                <img src="./images/MSG/28_01_2023.gif" alt="MSG dia anterior" class="gif_graph">
            </div>
        </div>

        <div class="container about">
            <div>
                <h2 class="subtitle">Comparación MSG y estaciones</h2>
                <img src="./images/graficas/1.png" alt="grafico 1" class="img_graph">
                <img src="./images/graficas/2.png" alt="grafico 1" class="img_graph">
                <img src="./images/graficas/3.png" alt="grafico 1" class="img_graph">
            </div>
        </div>

        <section class="container_web about">
            <h2 class="subtitle">Predicción AEMET</h2>
            <div class="container_otherweb">
                <div class="otherweb_container_marco">
                    <iframe src="https://www.aemet.es/es/eltiempo/prediccion/modelosnumericos/harmonie_arome#" name="targetframe2" allowTransparency="false" scrolling="yes" frameborder="0" class="otherweb"></iframe>
                </div>
            </div>
        </section>
        
        <div class="container_avamet">
            <div class="table">
                <h2 class="subtitle">Datos AVAMET</h2>
                <table class="table">
                    <thead class="table_avamet--header">
                        <tr class="tr_avamet">
                            <th class="th_avamet">Estació</th>
                            <th class="th_avamet">Altitud (m)</th>
                            <th class="th_avamet">T (°C)</th>
                            <th class="th_avamet">T mín (°C)</th>
                            <th class="th_avamet">T máx (°C)</th>
                            <th class="th_avamet">Punt rosada (°C)</th>
                            <th class="th_avamet">Wind Chill (°C)</th>
                            <th class="th_avamet">Humetat Relativa (%)</th>
                            <th class="th_avamet">Precip Dia (mm)</th>
                            <th class="th_avamet">Intensitat precip</th>
                            <th class="th_avamet">Vent (km/h)</th>
                            <th class="th_avamet">Direcció vent</th>
                            <th class="th_avamet">Màxim vent (km/h)</th>
                        </tr>
                    </thead>
                    <tbody id="tabla_avamet"></tbody>
                </table>
            </div>
        </div>
       






    </main>


    <footer class="footer">
        <section class="footer_container container">
            <nav class="nav nav--footer">
                <h2 class="footer_title">VALENSAT</h2>
            </nav>
        </section>
    </footer>

    


    <script src="./js/app.js"></script>
    <script src="./js/chart.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js" integrity="sha512-oKI0pS1ut+mxQZdqnD3w9fqArLyILRsT3Dx0B+8RVEXzEk3aNK3J3pWlaGJ8MtTs1oiwyXDAH6hG6jy1sY0YqA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./js/avamet_table.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
    <script src="./js/pruebajson.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js" integrity="sha512-oKI0pS1ut+mxQZdqnD3w9fqArLyILRsT3Dx0B+8RVEXzEk3aNK3J3pWlaGJ8MtTs1oiwyXDAH6hG6jy1sY0YqA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
    <script src="./js/diagrama.js"></script>
    
    <script>
    (function(){
        const chartData2 = './data/AEMET/climograma.csv'
        // parse the file from CSV to JSON
        d3.csv(chartData2).then(function(datapoints2) {
            const mes = [];
            const temp_2021 = [];
            const prec_2021 = [];

            for (i = 0; i < datapoints2.length; i++) {
                mes.push(datapoints2[i].mes)
                temp_2021.push(datapoints2[i].temp_2021)
                prec_2021.push(datapoints2[i].prec_2021)
            }
        
        // setup 
        const data = {
        labels: mes,
        datasets: [{
            label: 'Temperatura media (°C)',
            data: temp_2021,
            backgroundColor: ['rgba(247, 200, 21, .2)'],
            borderColor: ['rgba(227, 73, 73, 1)'],
            borderWidth: 2,
            tension: 0.3,
            yAxisID: 'y'
        },{
            label: 'Precipitación acumulada (mm)',
            data: prec_2021,
            backgroundColor: ['rgba(247, 200, 21, .2)'],
            borderColor: ['rgba(47, 112, 175, 0.5)'],
            borderWidth: 2,
            tension: 0.3,
            fill: '-1',
            yAxisID: 'percentage'
        }]
        };

        // config 
        const config = {
        type: 'line',
        data,
        options: {
            scales: {
            y: {
                beginAtZero: true,
                type: 'linear',
                position: 'left',
                min: 0,
                max: 50,
                ticks: {
                    callback: function(value, index, values) {
                        return `${value}.0 °C`
                    }
                }
            },
            percentage: {
                beginAtZero: true,
                type: 'linear',
                position: 'right',
                grid: {
                    drawOnChartArea: false
                },
                min: 0,
                max: 100,
                ticks: {
                    callback: function(value, index, values) {
                        return `${value}.0 mm`
                    }
                }
            }
            },
            plugins: {
                tooltip: {
                    yAlign: 'bottom',
                    displayColors: false,
                    backgroundColor: 'rgba(240, 248, 255, 0.8)',
                    titleColor: 'rgb(28, 37, 44)',
                    titleFont: {weight: 'bold', family: 'Arial', size: 14},
                    titleAlign: 'center',
                    titleMarginBottom: 1,
                    bodyColor: 'rgb(28, 37, 44)',
                    bodyFont: {family: 'Arial', size: 14},
                    caretSize: 12
                }
            }
        }
        };

        // render init block
        const myChart = new Chart(
        document.getElementById('clim_2021'),
        config
        );
    })
    })()
    </script>

    <script>
    (function(){
        const chartData3 = './data/AEMET/climograma.csv'
        // parse the file from CSV to JSON
        d3.csv(chartData3).then(function(datapoints3) {
            const mes = [];
            const temp_2022 = [];
            const prec_2022 = [];

            for (i = 0; i < datapoints3.length; i++) {
                mes.push(datapoints3[i].mes)
                temp_2022.push(datapoints3[i].temp_2022)
                prec_2022.push(datapoints3[i].prec_2022)
            }
        
        // setup 
        const data = {
        labels: mes,
        datasets: [{
            label: 'Temperatura media (°C)',
            data: temp_2022,
            backgroundColor: ['rgba(247, 200, 21, .2)'],
            borderColor: ['rgba(227, 73, 73, 1)'],
            borderWidth: 2,
            tension: 0.3,
            yAxisID: 'y'
        },{
            label: 'Precipitación acumulada (mm)',
            data: prec_2022,
            backgroundColor: ['rgba(247, 200, 21, .2)'],
            borderColor: ['rgba(47, 112, 175, 0.5)'],
            borderWidth: 2,
            tension: 0.3,
            fill: '-1',
            yAxisID: 'percentage'
        }]
        };

        // config 
        const config = {
        type: 'line',
        data,
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    type: 'linear',
                    position: 'left',
                    min: 0,
                    max: 115,
                    ticks: {
                        callback: function(value, index, values) {
                            return `${value}.0 °C`
                        }
                    }
                },
                percentage: {
                    beginAtZero: true,
                    type: 'linear',
                    position: 'right',
                    grid: {
                        drawOnChartArea: false
                    },
                    min: 0,
                    max: 230,
                    ticks: {
                        callback: function(value, index, values) {
                            return `${value}.0 mm`
                        }
                    }
                }
            },
            plugins: {
                tooltip: {
                    yAlign: 'bottom',
                    displayColors: false,
                    backgroundColor: 'rgba(240, 248, 255, 0.8)',
                    titleColor: 'rgb(28, 37, 44)',
                    titleFont: {weight: 'bold', family: 'Arial', size: 14},
                    titleAlign: 'center',
                    titleMarginBottom: 1,
                    bodyColor: 'rgb(28, 37, 44)',
                    bodyFont: {family: 'Arial', size: 14},
                    caretSize: 12
                }
            }
        }
        };

        // render init block
        const myChart = new Chart(
        document.getElementById('clim_2022'),
        config
        );
    })
    })()
    </script>



    <script>
    (function(){
        x = [1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022]
        y = [15.9,16.1,16.2,16.1,16.5,16.7,17,16.4,16.9,17.1,17.1,16.3,17,17,17.4,17.2,17.5,17.3,16.6,16.7,16.6,18,17.8,17.2,18,17.8,17.8,17.8,18.5,17.3,18,17.6,17.2,18.1,17.6,17.1,17.3,17.2,18.1,18,18.3,18.9,18.3,18.4,18.2,18.3,18.2,18.8,18,18.8]
        TM = [22,22.4,22,21.9,21.9,22.4,22.5,22.1,22.7,22.6,23.3,22,22.7,22.8,22.9,22.7,22.5,22.7,22,22.4,22.1,23.5,23.4,22.7,23.3,23.6,23.6,23.9,24,24.5,23.5,23,25.9,23.9,22.9,22.7,22.9,22,23,24.2,23.8,24.3,23.8,23.4,23.6,23.5,23.9,24.2,23.1,24.6]
        // setup 
        const data = {
            labels: x,
            datasets: [{
            label: 'Temperatura media (°C)',
            data: y,
            backgroundColor: 'rgba(227, 73, 73, 1)',
            borderColor: 'rgba(227, 73, 73, 1)',
            borderWidth: 2,
            tension: 0.4
            }
        ]
        };

        // config 
        const config = {
            type: 'bar',
            data,
            options: {
                scales: {
                    y: {
                    beginAtZero: false,
                    ticks: {
                        callback: function(value, index, values) {
                            return `${value} °C`;
                        },
                    },
                    min: 15,
                    max: 19
                    },
                },
                plugins: {
                tooltip: {
                    yAlign: 'bottom',
                    displayColors: false,
                    backgroundColor: 'rgba(240, 248, 255, 0.8)',
                    titleColor: 'rgb(28, 37, 44)',
                    titleFont: {weight: 'bold', family: 'Arial', size: 14},
                    titleAlign: 'center',
                    titleMarginBottom: 1,
                    bodyColor: 'rgb(28, 37, 44)',
                    bodyFont: {family: 'Arial', size: 14},
                    caretSize: 12
                }
            }
            }
        };

        // render init block
        const myChart = new Chart(
            document.getElementById('temp_hist'),
            config
        );
    })()
    </script>

    <script>
    (function(){
        xdata = [1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022]
        ydata = [397.03,388.15,564.91,409.24,559.77,214.68,299.23,406.17,236.99,685.03,254.01,383.77,521.22,602.95,558.83,543.32,1047.25,569.44,634.49,410.7,345.2,268.51,346.24,494.03,282.51,428.48,305.26,477.98,513.8,609.31,400.52,572.78,253.19,368.05,654.83,515.86,396.21,369.84,354.86,244.31,257.04,373.89,520.4,515.66,324.85,449.77,382.99,560.53,450.34,728.47]
        // setup 
        const data = {
            labels: xdata,
            datasets: [{
            label: 'Precipitación acumulada (mm)',
            data: ydata,
            backgroundColor: 'rgba(47, 112, 175, 1)',
            borderColor: 'rgba(47, 112, 175, 1)',
            borderWidth: 2,
            tension: 0.4
            }
        ]
        };

        // config 
        const config = {
            type: 'bar',
            data,
            options: {
                scales: {
                    y: {
                    beginAtZero: false,
                    ticks: {
                        callback: function(value, index, values) {
                            return `${value} mm`;
                        },
                    }
                    },
                },
                plugins: {
                tooltip: {
                    yAlign: 'bottom',
                    displayColors: false,
                    backgroundColor: 'rgba(240, 248, 255, 0.8)',
                    titleColor: 'rgb(28, 37, 44)',
                    titleFont: {weight: 'bold', family: 'Arial', size: 14},
                    titleAlign: 'center',
                    titleMarginBottom: 1,
                    bodyColor: 'rgb(28, 37, 44)',
                    bodyFont: {family: 'Arial', size: 14},
                    caretSize: 12
                }
            }
            }
        };

        // render init block
        const myChart = new Chart(
            document.getElementById('prec_hist'),
            config
        );
    })()
    </script>

      


</body>
</html>